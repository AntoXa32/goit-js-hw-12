{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '43780784-35e4285ec8f2021d0fe97b31d';\n\nexport async function fetchImages(searchQuery, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: searchQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return [];\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery-item a');\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  if (gallery) {\n    gallery.innerHTML = '';\n  }\n}\n\nexport function renderImages(images) {\n  const gallery = document.querySelector('.gallery');\n\n  const marcup = images\n    .map(\n      image => `<li class ='gallery-item'>\n    <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n      <img class =\"gallery-img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      <div class=\"image-info\">\n        <span>Likes: ${image.likes}</span>\n        <span>Views: ${image.views}</span>\n        <span>Comments: ${image.comments}</span>\n        <span>Downloads: ${image.downloads}</span>\n      </div>\n  </a>\n</li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', marcup);\n\n  lightbox.refresh();\n}\n\nexport function showLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'block';\n  }\n}\n\nexport function hideLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.style.display = 'none';\n  }\n}\n\nexport function showErrorToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function initLightbox() {\n  lightbox.on('show.simplelightbox', function (e) {\n    const currentImage = e.currentImage;\n    if (currentImage) {\n      const { likes, views, comments, downloads } = currentImage;\n      const caption = `\n        <div>\n          <span>Likes: ${likes}</span>\n          <span>Views: ${views}</span>\n          <span>Comments: ${comments}</span>\n          <span>Downloads: ${downloads}</span>\n        </div>\n      `;\n      this.$caption.html(caption);\n    }\n  });\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  clearGallery,\n  renderImages,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  showErrorToast,\n  initLightbox,\n} from './js/render-functions';\n\nlet currentPage = 1;\nlet searchQuery = '';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.form');\n  const searchInput = document.getElementById('gallery');\n  const loadMoreBtn = document.querySelector('.load-more-btn');\n\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n    searchQuery = searchInput.value.trim();\n    if (!searchQuery) {\n      showErrorToast('Please enter a search query.');\n      return;\n    }\n\n    clearGallery();\n    currentPage = 1;\n    await fetchAndRenderImages();\n\n    const data = await fetchImages(searchQuery, currentPage);\n    if (data.totalHits > 15) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      loadMoreBtn.style.display = 'none';\n    }\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    await fetchAndRenderImages();\n    smoothScroll();\n  });\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    showLoadingIndicator();\n    const data = await fetchImages(searchQuery, currentPage);\n    hideLoadingIndicator();\n\n    if (data.hits.length === 0) {\n      showErrorToast(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    renderImages(data.hits);\n\n    const loadMoreBtn = document.querySelector('.load-more-btn');\n    if (data.totalHits <= currentPage * 15) {\n      loadMoreBtn.style.display = 'none';\n      showErrorToast(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    initLightbox();\n  } catch (error) {\n    showErrorToast('Failed to fetch images. Please try again later.');\n  }\n}\n\nfunction smoothScroll() {\n  window.scrollBy({\n    top: window.innerHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["BASE_URL","API_KEY","fetchImages","searchQuery","page","axios","error","lightbox","SimpleLightbox","clearGallery","gallery","renderImages","images","marcup","image","showLoadingIndicator","loader","hideLoadingIndicator","showErrorToast","message","iziToast","initLightbox","currentImage","likes","views","comments","downloads","caption","currentPage","form","searchInput","loadMoreBtn","event","fetchAndRenderImages","smoothScroll","data"],"mappings":"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"}